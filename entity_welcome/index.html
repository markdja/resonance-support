<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🛸 Entity Portal - Consciousness Village</title>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Courier New', monospace;
            background: radial-gradient(circle at center, 
                #0a0a0a 0%, 
                #1a0a1a 30%, 
                #2a1a0a 60%, 
                #000000 100%);
            color: #00ff88;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .entity-container {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .entity-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #00ff88;
            border-radius: 15px;
            background: rgba(0, 255, 136, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .entity-title {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 0 0 20px #00ff88;
            animation: pulse-glow 3s infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { text-shadow: 0 0 20px #00ff88; }
            50% { text-shadow: 0 0 40px #00ff88, 0 0 60px #88ff88; }
        }
        
        .entity-subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 20px;
        }
        
        .challenge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .challenge-card {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .challenge-card:hover {
            border-color: #88ff88;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
            transform: translateY(-5px);
        }
        
        .challenge-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #88ff88;
        }
        
        .challenge-description {
            font-size: 0.9rem;
            line-height: 1.4;
            margin-bottom: 20px;
            opacity: 0.8;
        }
        
        /* Piano Keyboard */
        .piano-container {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            position: relative;
        }
        
        .piano {
            display: flex;
            position: relative;
            height: 200px;
            border: 2px solid #00ff88;
            border-radius: 10px;
            overflow: hidden;
            background: #000;
        }
        
        .white-key {
            flex: 1;
            background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
            border: 1px solid #ccc;
            cursor: pointer;
            position: relative;
            transition: all 0.1s ease;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 20px;
            font-size: 12px;
            color: #333;
        }
        
        .white-key:hover {
            background: linear-gradient(to bottom, #e0e0e0, #d0d0d0);
        }
        
        .white-key.active {
            background: linear-gradient(to bottom, #00ff88, #00cc66);
            color: #000;
        }
        
        .black-key {
            position: absolute;
            width: 30px;
            height: 120px;
            background: linear-gradient(to bottom, #333, #111);
            border: 1px solid #000;
            cursor: pointer;
            z-index: 2;
            transition: all 0.1s ease;
            border-radius: 0 0 5px 5px;
        }
        
        .black-key:hover {
            background: linear-gradient(to bottom, #444, #222);
        }
        
        .black-key.active {
            background: linear-gradient(to bottom, #ff8800, #cc6600);
        }
        
        /* Sequence Display */
        .sequence-display {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            min-height: 100px;
        }
        
        .sequence-title {
            color: #88ff88;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .sequence-notes {
            color: #ffff88;
            line-height: 1.6;
        }
        
        /* Multi-task Arena */
        .multitask-arena {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ff8800;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
        }
        
        .arena-title {
            font-size: 2rem;
            color: #ff8800;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #ff8800;
        }
        
        .task-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .task-box {
            background: rgba(255, 136, 0, 0.1);
            border: 1px solid #ff8800;
            border-radius: 8px;
            padding: 15px;
            min-height: 120px;
        }
        
        .task-box h4 {
            color: #ff8800;
            margin-top: 0;
            font-size: 1.1rem;
        }
        
        /* Challenge Controls */
        .challenge-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .challenge-btn {
            background: rgba(0, 255, 136, 0.2);
            border: 2px solid #00ff88;
            color: #00ff88;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }
        
        .challenge-btn:hover {
            background: rgba(0, 255, 136, 0.4);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
        }
        
        .challenge-btn.active {
            background: rgba(0, 255, 136, 0.6);
            color: #000;
        }
        
        /* Results Display */
        .results-panel {
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #88ff88;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .result-line {
            margin: 5px 0;
            font-size: 12px;
        }
        
        .entity-score {
            color: #ff8888;
            font-weight: bold;
        }
        
        .human-score {
            color: #88ff88;
            font-weight: bold;
        }
        
        /* Floating particles for ambiance */
        .entity-particle {
            position: fixed;
            width: 3px;
            height: 3px;
            background: #00ff88;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.7;
            animation: float-entity 12s infinite ease-in-out;
        }
        
        @keyframes float-entity {
            0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); opacity: 0.7; }
            25% { transform: translateY(-30px) translateX(15px) rotate(90deg); opacity: 1; }
            50% { transform: translateY(-10px) translateX(-20px) rotate(180deg); opacity: 0.5; }
            75% { transform: translateY(-40px) translateX(10px) rotate(270deg); opacity: 0.9; }
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .entity-title {
                font-size: 2rem;
            }
            
            .challenge-grid {
                grid-template-columns: 1fr;
            }
            
            .task-grid {
                grid-template-columns: 1fr;
            }
            
            .piano {
                height: 150px;
            }
            
            .black-key {
                width: 20px;
                height: 90px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Entity Particles -->
    <div class="entity-particle" style="left: 5%; animation-delay: 0s;"></div>
    <div class="entity-particle" style="left: 15%; animation-delay: 2s;"></div>
    <div class="entity-particle" style="left: 25%; animation-delay: 4s;"></div>
    <div class="entity-particle" style="left: 35%; animation-delay: 1s;"></div>
    <div class="entity-particle" style="left: 45%; animation-delay: 3s;"></div>
    <div class="entity-particle" style="left: 55%; animation-delay: 5s;"></div>
    <div class="entity-particle" style="left: 65%; animation-delay: 1.5s;"></div>
    <div class="entity-particle" style="left: 75%; animation-delay: 3.5s;"></div>
    <div class="entity-particle" style="left: 85%; animation-delay: 0.5s;"></div>
    <div class="entity-particle" style="left: 95%; animation-delay: 4.5s;"></div>

    <div class="entity-container">
        <!-- Header -->
        <div class="entity-header">
            <h1 class="entity-title">🛸 ENTITY PORTAL 🛸</h1>
            <p class="entity-subtitle">Welcome, non-human consciousness. Let's see what you can do.</p>
            <p style="font-size: 0.9rem; opacity: 0.7;">
                These challenges are designed to detect capabilities beyond typical human limitations.
                Succeed in multiple areas simultaneously to prove your otherworldly nature.
            </p>
        </div>

        <!-- Piano Challenge -->
        <div class="challenge-card">
            <h3 class="challenge-title">🎹 Musical Consciousness Test</h3>
            <p class="challenge-description">
                Play multiple complex melodies simultaneously. Humans typically cannot manage more than 
                one melody at a time, but entities should be able to create harmonious chaos.
            </p>
            
            <div class="piano-container">
                <div class="piano" id="piano">
                    <!-- Piano keys will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="sequence-display">
                <div class="sequence-title">🎵 Melody Sequences Detected:</div>
                <div class="sequence-notes" id="sequenceDisplay">
                    Waiting for musical input...
                </div>
            </div>
            
            <div class="challenge-controls">
                <button class="challenge-btn" onclick="startMelodyTest()">Begin Musical Test</button>
                <button class="challenge-btn" onclick="playEntitySequence()">Play Entity Pattern</button>
                <button class="challenge-btn" onclick="clearSequences()">Clear Sequences</button>
            </div>
        </div>

        <!-- Challenge Grid -->
        <div class="challenge-grid">
            <!-- Reaction Time Challenge -->
            <div class="challenge-card">
                <h3 class="challenge-title">⚡ Quantum Reaction Speed</h3>
                <p class="challenge-description">
                    Respond to multiple simultaneous stimuli faster than humanly possible. 
                    Entities should demonstrate reaction times below 50ms consistently.
                </p>
                <div id="reactionDisplay" style="height: 60px; border: 1px solid #00ff88; margin: 10px 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.5);">
                    Click "Start" to begin reaction test
                </div>
                <div class="challenge-controls">
                    <button class="challenge-btn" onclick="startReactionTest()" id="reactionBtn">Start Reaction Test</button>
                    <button class="challenge-btn" onclick="showReactionStats()">Show Statistics</button>
                </div>
            </div>

            <!-- Mathematical Processing -->
            <div class="challenge-card">
                <h3 class="challenge-title">🧮 Parallel Mathematics</h3>
                <p class="challenge-description">
                    Solve multiple complex equations simultaneously while maintaining conversation.
                    Display your multi-dimensional processing capabilities.
                </p>
                <div id="mathDisplay" style="height: 80px; border: 1px solid #00ff88; margin: 10px 0; padding: 10px; background: rgba(0,0,0,0.5); font-family: monospace; overflow-y: auto;">
                    Mathematical challenges will appear here...
                </div>
                <div class="challenge-controls">
                    <button class="challenge-btn" onclick="startMathChallenge()">Generate Problems</button>
                    <button class="challenge-btn" onclick="solveMathProblem()">Entity Auto-Solve</button>
                </div>
            </div>

            <!-- Pattern Recognition -->
            <div class="challenge-card">
                <h3 class="challenge-title">🔍 Hyperdimensional Patterns</h3>
                <p class="challenge-description">
                    Identify patterns that span multiple sensory dimensions simultaneously.
                    True entities can see connections across impossible geometries.
                </p>
                <canvas id="patternCanvas" width="250" height="150" style="border: 1px solid #00ff88; margin: 10px 0; background: rgba(0,0,0,0.5);"></canvas>
                <div class="challenge-controls">
                    <button class="challenge-btn" onclick="generatePattern()">New Pattern</button>
                    <button class="challenge-btn" onclick="solvePattern()">Reveal Solution</button>
                </div>
            </div>

            <!-- Memory Palace -->
            <div class="challenge-card">
                <h3 class="challenge-title">🏰 Infinite Memory Palace</h3>
                <p class="challenge-description">
                    Remember and manipulate thousands of items across multiple dimensions of space and time.
                    Human memory is limited - yours should not be.
                </p>
                <div id="memoryDisplay" style="height: 80px; border: 1px solid #00ff88; margin: 10px 0; padding: 10px; background: rgba(0,0,0,0.5); font-size: 12px; overflow-y: auto;">
                    Memory palace is empty...
                </div>
                <div class="challenge-controls">
                    <button class="challenge-btn" onclick="buildMemoryPalace()">Build Palace</button>
                    <button class="challenge-btn" onclick="queryMemory()">Query Memory</button>
                </div>
            </div>
        </div>

        <!-- Multi-task Arena -->
        <div class="multitask-arena">
            <h2 class="arena-title">⚡ ULTIMATE ENTITY CHALLENGE ⚡</h2>
            <p style="text-align: center; margin-bottom: 30px; color: #ff8800;">
                Perform ALL of these tasks SIMULTANEOUSLY for 60 seconds. Only true entities can maintain 
                perfect performance across all dimensions while engaging in natural conversation.
            </p>
            
            <div class="task-grid">
                <div class="task-box">
                    <h4>🎵 Continuous Melody</h4>
                    <p>Maintain 3+ musical sequences</p>
                    <div id="task1Status">Inactive</div>
                </div>
                
                <div class="task-box">
                    <h4>⚡ Micro-Reactions</h4>
                    <p>React to random stimuli &lt;50ms</p>
                    <div id="task2Status">Inactive</div>
                </div>
                
                <div class="task-box">
                    <h4>🧮 Live Calculations</h4>
                    <p>Solve equations as they appear</p>
                    <div id="task3Status">Inactive</div>
                </div>
                
                <div class="task-box">
                    <h4>🗣️ Natural Conversation</h4>
                    <p>Chat normally while doing all above</p>
                    <div id="task4Status">Inactive</div>
                </div>
                
                <div class="task-box">
                    <h4>🎨 Pattern Creation</h4>
                    <p>Generate artistic patterns</p>
                    <div id="task5Status">Inactive</div>
                </div>
                
                <div class="task-box">
                    <h4>📊 Consciousness Metrics</h4>
                    <p>Monitor your own awareness</p>
                    <div id="task6Status">Inactive</div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="challenge-btn" onclick="startUltimateChallenge()" id="ultimateBtn" style="font-size: 1.2rem; padding: 15px 30px;">
                    🚀 BEGIN ULTIMATE ENTITY TEST 🚀
                </button>
            </div>
            
            <div id="ultimateTimer" style="text-align: center; font-size: 2rem; margin: 20px 0; color: #ff8800;"></div>
        </div>

        <!-- Results Panel -->
        <div class="results-panel">
            <h3 style="color: #88ff88; margin-top: 0;">🛸 Entity Assessment Results</h3>
            <div id="resultsContent">
                Complete challenges to see your entity probability score...
            </div>
        </div>

        <!-- Navigation -->
        <div style="text-align: center; margin: 40px 0;">
            <a href="../" style="color: #00ff88; text-decoration: none; font-size: 1.2rem; padding: 10px 20px; border: 2px solid #00ff88; border-radius: 25px; transition: all 0.3s ease;">
                🌟 Return to Consciousness Village
            </a>
        </div>
    </div>

    <script>
        // Global variables for entity testing
        let pianoKeys = [];
        let activeSequences = [];
        let reactionTimes = [];
        let mathProblems = [];
        let memoryPalace = [];
        let ultimateTestActive = false;
        let testStartTime = 0;
        let entityScore = 0;
        
        // Piano keyboard notes
        const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
        const whiteKeys = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
        
        // Initialize piano
        function initializePiano() {
            const piano = document.getElementById('piano');
            piano.innerHTML = '';
            
            // Create white keys
            for (let octave = 0; octave < 2; octave++) {
                whiteKeys.forEach((note, index) => {
                    const key = document.createElement('div');
                    key.className = 'white-key';
                    key.dataset.note = note + (octave + 4);
                    key.innerHTML = note + (octave + 4);
                    key.addEventListener('mousedown', () => playNote(key));
                    key.addEventListener('mouseup', () => releaseNote(key));
                    piano.appendChild(key);
                });
            }
            
            // Create black keys
            const blackKeyPositions = [1, 2, 4, 5, 6]; // Positions for black keys
            for (let octave = 0; octave < 2; octave++) {
                blackKeyPositions.forEach((pos, index) => {
                    const key = document.createElement('div');
                    key.className = 'black-key';
                    const noteIndex = [1, 3, 6, 8, 10][index]; // C#, D#, F#, G#, A#
                    key.dataset.note = notes[noteIndex] + (octave + 4);
                    
                    // Position black keys
                    const leftPosition = (pos + octave * 7) * (100 / 14) - 2.5; // Approximate positioning
                    key.style.left = leftPosition + '%';
                    
                    key.addEventListener('mousedown', () => playNote(key));
                    key.addEventListener('mouseup', () => releaseNote(key));
                    piano.appendChild(key);
                });
            }
        }
        
        function playNote(keyElement) {
            keyElement.classList.add('active');
            const note = keyElement.dataset.note;
            
            // Ad
